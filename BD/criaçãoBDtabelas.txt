create database  if not exists hospital_universitario
default character set utf8 
default collate utf8_general_ci;

use hospital_universitario;

create table if not exists usuarios (  
  CPF char(11) primary key not null,
  Nome varchar(50) not null,
  Senha varchar(20) not null,  
  Email varchar(50) not null,
  Data_Nasc date not null,
  Atribuicao enum('a','b','c','d') not null,
  Sexo varchar(20) not null,
  Ip varchar(15) not null
);

create table if not exists prontuario (  
  Nome_Paciente varchar(50) not null,
  Sexo varchar(20) not null,
  Data_Nasc Date not null,
  CPF char(11) primary key not null,
  Tipo_Sang varchar(5) not null,
  Data_Internacao Date not null,
  Data_Saida Date not null,
  Leito varchar(10) not null,
  Status enum('internado','alta','obito') not null
);

create table if not exists cid( 
  CPF_prontuario char(11) not null,
  foreign key(CPF_prontuario) references prontuario(CPF),
  CodCID char(6) not null,
  Id bigint(20) primary key AUTO_INCREMENT
);

create table if not exists medicamento ( 
  Nome_Medicam varchar(50) not null,
  Quantidade int not null,
  Fabricante varchar(30) not null,
  Data_Validade Date not null,
  Codigo bigint primary key not null
);

create table if not exists Administradores(
	CPF char(11) NOT NULL primary key,
	Foreign key(CPF) references usuarios(CPF)
); 

create table if not exists Responsaveis(
	Atribuicao  enum('a','b','c','d') NOT NULL,
    CPF char(11) primary key NOT NULL,
    Foreign key(CPF) references usuarios(CPF)
);

create table if not exists Enfermeiros(
	CPF char(11) NOT NULL,
    COREN char(10) 	NOT NULL,
    Plantao boolean,
    primary key(COREN),
    Foreign key(CPF) references usuarios(CPF)
);

create table if not exists Estagiarios(
	CPF char(11) NOT NULL,
    Plantao boolean,
    primary key(CPF),
    Foreign key(CPF) references usuarios(CPF)
);

create table if not exists Enfermeiros_Chefes(
	CPF char(11) NOT NULL,
    COREN char(10) 	NOT NULL,
    primary key(COREN),
    Foreign key(CPF) references usuarios(CPF)
);

